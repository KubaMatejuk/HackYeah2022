#:import Gradient kivy_gradient.Gradient
#:import Vector kivy.vector.Vector
#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import MapView kivy_garden.mapview.MapView

<WindowManager>:
    WasteOverLogInScreen:
    WasteOverMenu:
    WasteOverMap:
    WasteOverBarReader:
    WasteOverSecondLife:

<WasteOverLogInScreen>:
    name: 'logInScreen'
    BoxLayout:
        id: loginBox
        padding: ['20dp', '10dp', '10dp', '10dp']
        spacing: '10dp'
        orientation:'vertical'
        canvas.before:
            Color:
                rgba: 1,1,1,1
            Ellipse:
                pos: [0,0]
                size: 2*self.width, 2*self.height
                texture: Gradient.horizontal(get_color_from_hex("FFD700"), get_color_from_hex("39CE00"))
        AnchorLayout:
            padding: ['100dp', 0, 0, 0]
            MDLabel:
                id: end_text
                top: root.top - 50
                valign: 'middle'
                text: 'Waste Over'
                bold: True
                font_name: 'game_over'
                font_size: '90sp'
                size_hint: None, None
                height: '100dp'
                width: '320dp'
                opacity: 0
            MDLabel:
                id: start_text
                top: root.top - 50
                valign: 'middle'
                text: 'Game Over?'
                bold: True
                font_name: 'game_over'
                font_size: '90sp'
                size_hint: None, None
                height: '100dp'
                width: '320dp'
                opacity: 1
        TextInput:
            id: email
            hint_text: 'Email/Username'
            size_hint:(1, None)
            valign: 'center'
            text_size: root.width, root.height
            height: '30dp'
            background_color: .4, .4, .4, .5
            cursor_color: 1, 1, 1, 1
            foreground_color: 1, 1, 1, 1
            hint_text_color: 1, 1, 1, 1
            use_bubble: True
            font_size: '16sp'
            multiline: False
            write_tab: False
            bold: 1
            on_text_validate: root.login()
        TextInput:
            id: password
            hint_text: 'Password'
            size_hint:(1, None)
            valign: 'center'
            password: True
            text_size: root.width, root.height
            height: '30dp'
            background_color: .4, .4, .4, .5
            cursor_color: 1, 1, 1, 1
            foreground_color: 1, 1, 1, 1
            hint_text_color: 1, 1, 1, 1
            use_bubble: True
            font_size: '16sp'
            multiline: False
            write_tab: False
            bold: 1
            on_text_validate: root.login()
        MDRaisedButton:
            size_hint:(1, None)
            valign: 'center'
            id: sign_in_btn
            text: 'Sign In'
            color: 0, 0, 0, 0
            md_bg_color: 0, 0, 0, 1
            on_press: root.login()
        MDRaisedButton:
            size_hint:(1, None)
            valign: 'center'
            id: reset_password_button
            text: 'Forgot Password?'
            color: 0, 0, 0, 0
            md_bg_color: 0, 0, 0, 1        
        Label:
            valign: 'bottom'
            text: 'or sign up with'
            font_size: '18sp'
            color: 0, 0, 0, 1
        GridLayout:
            padding: 0, 10, 0, 0
            spacing: '25dp'
            size_hint: 1, None
            height: self.minimum_height
            cols: 3
            canvas:
                Color:
                    rgba: .4, .4, .4, 1
                Rectangle:
                    size: self.width, 1
                    pos: self.x, self.y+self.height-1

            AnchorLayout:
                size_hint_y: None
                height: but1.height
                MDIconButton:
                    id: but1
                    icon: "google"
                    user_font_size: "32sp"
                    elevation_normal: 12
                    md_bg_color: .4, .4, .4, .2

            AnchorLayout:
                size_hint_y: None
                height: but2.height
                MDIconButton:
                    id: but2
                    icon: "facebook"
                    user_font_size: "32sp"
                    elevation_normal: 12
                    md_bg_color: .4, .4, .4, .2

            AnchorLayout:
                size_hint_y: None
                height: but3.height
                MDIconButton:
                    id: but3
                    icon: "twitter"
                    user_font_size: "32sp"
                    elevation_normal: 12
                    md_bg_color: .4, .4, .4, .2

<WasteOverMenu>:
    name: 'mainMenu'
    BoxLayout:
        valign: 'top'
        id: loginBox
        padding: ['5dp', '5dp', '5dp', '110dp']
        spacing: '20dp'
        orientation:'vertical'
        canvas.before:
            Color:
                rgba: 1,1,1,1
            Ellipse:
                pos: [0,0]
                size: 2*self.width, 2*self.height
                texture: Gradient.horizontal(get_color_from_hex("FFD700"), get_color_from_hex("39CE00"))
        AnchorLayout:
            height: logout_btn.height
            padding: [self.width-logout_btn.width, 0, 0, self.height-logout_btn.height]
            MDIconButton:
                id: logout_btn
                icon: "skip-backward"
                elevation_normal: 12
                user_font_size: "30sp"
                md_bg_color: 0.25, 0.25, 0.25, 0.5
                on_press: root.back()
        # Image:
        #    source: 'sign-arrows.gif'

        MDLabel:
            id: main_menu_label
            top: root.top - 50
            valign: 'middle'
            text: 'Main Menu'
            bold: True
            font_name: 'game_over'
            font_size: '90sp'
            size_hint: None, None
            height: '100dp'
            width: '320dp'
            opacity: 1
        MDRaisedButton:
            id: maps_in_btn
            text: 'Maps'
            text_color: 'white'
            font_size: 30
            on_press: root.open_maps()
            valign: 'center'
            size_hint:(1, None)
            color: 0, 0, 0, 0
            md_bg_color: 0, 0, 0, 1
        MDRaisedButton:
            id: bar_in_btn
            text: 'Bar code reader'
            text_color: 'white'
            font_size: 30
            valign: 'center'
            size_hint:(1, None)
            color: 0, 0, 0, 0
            md_bg_color: 0, 0, 0, 1
            on_press: root.open_bars()
        MDRaisedButton:
            id: secondlife_in_btn
            text: 'Second Life'
            text_color: 'white'
            font_size: 30
            valign: 'center'
            size_hint:(1, None)
            color: 0, 0, 0, 0
            md_bg_color: 0, 0, 0, 1
            on_press: root.open_second_life()


<WasteOverMap>:
    map: map_ui
    name: 'mapScreen'
    MapView:
        id: map_ui
        lat: 51.11027336343235
        lon: 17.027433148736037
        zoom: 15

<MarkerPopUp>:
    id: marker_pop_up
    message: message
    wrapped_button: wrapped_button
    BoxLayout:
        Label:
            id: message
            text: "test"
            background_color: 1, 0, 0, 1
            halign: "center"
            markup: True
        Button:
            id: wrapped_button
            text: "Close"
            on_press: root.dismiss()

<WasteOverBarReader>:
    name: 'barScreen'
    BoxLayout:
        id: loginBox
        padding: ['0dp', '50dp', '5dp', self.height-50]
        spacing: '20dp'
        orientation:'vertical'
        canvas.before:
            Color:
                rgba: 1,1,1,1
            Ellipse:
                pos: [0,0]
                size: 2*self.width, 2*self.height
                texture: Gradient.horizontal(get_color_from_hex("FFD700"), get_color_from_hex("39CE00"))
        GridLayout:
            size_hint: 1, None
            height: self.minimum_height
            cols: 2
            AnchorLayout:
                size_hint_y: None
                height: back_btn.height
                padding: [0, 0, self.width-bar_text.width, self.height-bar_text.height]
                MDLabel:
                    id: bar_text
                    top: root.top - 50
                    valign: 'middle'
                    text: 'Bar Reader Screen'
                    bold: True
                    font_name: 'game_over'
                    font_size: '60sp'
                    size_hint: None, None
                    height: '100dp'
                    width: '320dp'
            AnchorLayout:
                size_hint_y: None
                height: back_btn.height
                padding: [self.width-back_btn.width, '5dp', '5dp', self.height-back_btn.height]
                MDIconButton:
                    id: back_btn
                    icon: "skip-backward"
                    elevation_normal: 12
                    user_font_size: "30sp"
                    md_bg_color: 0.25, 0.25, 0.25, 0.5
                    on_press: root.back()


<WasteOverSecondLife>:
    name: 'secondLifeScreen'
    BoxLayout:
        id: loginBox
        padding: ['0dp', '50dp', '5dp', self.height-50]
        spacing: '20dp'
        orientation:'vertical'
        canvas.before:
            Color:
                rgba: 1,1,1,1
            Ellipse:
                pos: [0,0]
                size: 2*self.width, 2*self.height
                texture: Gradient.horizontal(get_color_from_hex("FFD700"), get_color_from_hex("39CE00"))
        GridLayout:
            size_hint: 1, None
            height: self.minimum_height
            cols: 2
            AnchorLayout:
                size_hint_y: None
                height: second_life_text.height
                padding: [0, 0, self.width-second_life_text.width, self.height-second_life_text.height]
                MDLabel:
                    id: second_life_text
                    top: root.top - 50
                    valign: 'middle'
                    text: 'Second Life Screen'
                    bold: True
                    font_name: 'game_over'
                    font_size: '60sp'
                    size_hint: None, None
                    height: '100dp'
                    width: '320dp'
            AnchorLayout:
                size_hint_y: None
                height: back_btn.height
                padding: [self.width-back_btn.width, '5dp', '5dp', self.height-back_btn.height]
                MDIconButton:
                    id: back_btn
                    icon: "skip-backward"
                    elevation_normal: 12
                    user_font_size: "30sp"
                    md_bg_color: 0.25, 0.25, 0.25, 0.5
                    on_press: root.back()



<Manager>:
    id: screen_manager

    screen_login: loginScreen
    screen_mainmenu: mainMenu
    screen_map: mapScreen
    screen_bar: barScreen
    screen_secondlife: secondLifeScreen

    ScreenOne:
        id: loginScreen
        name: "loginScreen"
        manager: screen_manager

    ScreenTwo:
        id: mainMenu
        name: "mainMenu"
        manager: screen_manager

    ScreenThree:
        id: mapScreen 
        name: 'mapScreen'
        manager: screen_manager

    ScreenFour:
        id: barScreen
        name: 'barScreen'
        manager: screen_manager

    ScreenFive:
        id: secondLifeScreen
        name: 'secondLifeScreen'
        manager: screen_manager
